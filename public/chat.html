<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <script src="https://cdn.socket.io/socket.io-1.0.6.js"></script>
    <title></title>

    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body, html {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            background-color: black;
            font-size: 1.2em;
            overflow: hidden;
        }


        input {
            border: none;
            background: none;
            color: white;
            border-bottom: 2px solid green;
            outline: none;
            box-sizing: border-box;
        }

        #board {
            height: calc(100% - 16px);
            border: 2px solid green;
            color: #41A317;
            overflow: auto;
            padding-bottom:20px;
        }

            #board > div {
                padding: 0 4px;
                transition: height .5s;
                height: 0;
                overflow: hidden;
            }
            #nameBox{
                color:green;
            }
    </style>
</head>
<body>
    <div style="max-width:600px;margin:auto;height:calc( 100% - 25px);margin-top:10px;">
        <div id="board"> </div>
        <input style="width:80px;" id="nameBox" value="anonymous" /><input style="width:calc(100% - 80px);" id="msgBox" />
    </div>


    <script>
        var socket = io.connect();
        socket.on('news', function (data) {
            var item = document.createElement('div');
            item.innerHTML = data;
            board.appendChild(item);
            setTimeout(function () {
                item.style.height = '2em';
            }, 1)
            setTimeout(function () {
                item.style.height = 'auto';
                board.scrollTop = board.scrollHeight;
            }, 500)
        });
        msgBox.addEventListener('keydown', function (evt) {
            if (13 == evt.keyCode) {
                socket.emit('msg', nameBox.value + ': ' + msgBox.value);
                msgBox.value = '';
                msgBox.focus();
            }
        })
        msgBox.focus();
    </script>
</body>
</html>